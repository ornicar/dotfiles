#!/bin/sh

text=$1
output=${2-/tmp/google-voice-output.mpg}

curl --data-urlencode "q=$text" "https://translate.google.com/translate_tts?ie=UTF-8&tl=en&total=1&idx=0&textlen=25&client=t&prev=input" -H 'pragma: no-cache' -H 'dnt: 1' -H 'accept-encoding: identity;q=1, *;q=0' -H 'accept-language: en-US,en;q=0.8' -H 'user-agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2311.90 Safari/537.36' -H 'accept: */*' -H 'cache-control: no-cache' -H 'authority: translate.google.com' -H 'cookie: PREF=ID=de032708ad166d72:U=4cc48c04b6ebf521:LD=en:TM=1428738839:LM=1428843886:S=L3bQl4J_qgnBZKow; NID=67=iucK2GuzNwijjmM8Q1q0rzmz0ACubMpYE74ScQ5l0inDeO6uLI2RCoN-WtYTYUHcfENGPillRNlva5GglpdvzPuox1yERWmVkcPoyG6LKzBd2D0bgQQQ824CAlDrNMN9bh9WrutDKyPDyLMYsZBMehu-XqlMHNG3nWWX1uhDM9u7XFeQfPQA4CO8pVKGn5evuMLioa7lwX7J1Jlafg80X-QgZYTkrnmP; SID=DQAAAMwBAAA471MrjOtmKsxxFhmxEbXsXF48NqKaim3iDcGKsIrI4Ub8j0aC5zqBCR1wiG6c8wCOjsm7g-7YNXCkiK0Df9BKUdyU776nSfE5OLz47OJ_m1rnjM2Na0-LXKn5wszN5djGuE8HZvmAKmlBCBzkezuzi56XrHx2stzV5V8TnD98Nyt2vkuwV9fYR07rDfpNU9HK-ANNtQgY46KmpqAqSqctyCv5pcAVacc-Mxky9GS1Gc2kh7v_fuDHUtH6YHLP1Z42Hc1t-PwU9VtDI-uConN0IFRtM1Bx-9dHDcDsGpQh2DA0s0PKiCLGPN8IyY1Gvi9zT2y58f-E2_suH7Ilu4K7wIsRc_EJAJZooucaZx5YZ8_3pDZrHYFIMZe0hoMlIKoeiRrykUGo-AdYJdMbYryT87_jC3gk85p5SAPd4Nd2NQSq7CulLmwHziIxQ1f74rfcB08M37wqXGw6xCre-fePJkjlZ2AVMCGHsPRHpPAYD4gBk3kbSy3RIm7p_7xQw8Qa8JEY-rQTaFTe96kJ3ECXzbTCWUzLIss7neLuxgSFWGHiebHJuAdBScwNGW1wnDwi4WpgZzLYWZ6U7Iib2Kj1EVo9uD1O2aBqHESSwVnBmA; HSID=APkiQY4SWVMBpLLFF; SSID=AeQjeZCjGz3Qj24gT; APISID=IPcFd_l6hh31qg8H/AI01lJweLpXuL8sYK; SAPISID=QP0MDPEpCzVJ0wVq/AkIjEGZoNBK8oLxYN' -H 'referer: https://translate.google.com/' -H 'range: bytes=0-' --compressed -o $output

mplayer $output
